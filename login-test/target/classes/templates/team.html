<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${team.name}">Team</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <script th:src="@{/js/layout.js}" defer></script>
  <script th:src="@{/js/team.js}" defer></script>
</head>
<body>

  <!-- ヘッダー -->
  <div th:replace="fragments/header :: header"></div>

  <div class="main-layout">
    <!-- サイドバー -->
    <div th:insert="fragments/sidebar :: sidebar"></div>

    <!-- メインコンテンツ -->
    <div class="content">
      <!-- パンくずリスト -->
      <div id="breadcrumb" class="breadcrumb">
        <span class="breadcrumb-item" data-action="home" th:text="${company.name}">会社名</span> >
        <span class="breadcrumb-item" data-action="department" th:attr="data-id=${team.department.id}" th:text="${team.department.name}">部署名</span> >
        <span class="breadcrumb-item" data-action="team" th:attr="data-id=${team.id}" th:text="${team.name}">チーム名</span>
      </div>
       
      <h1 th:text="${team.name}">Team Name</h1>
      <p><strong>所属部署:</strong> <span th:text="${team.department.name}">Department</span></p>

      <!-- メッセージ一覧 -->
      <div class="message-list" style="margin: 20px 0; max-height: 400px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
        <div th:each="msg : ${messages}" class="message-item" style="margin-bottom: 10px; padding: 8px; background: #f9f9f9; border-radius: 4px;">
          <p th:text="${msg.content}">Message content</p>
          <small th:text="${#temporals.format(msg.createdAt, 'yyyy-MM-dd HH:mm')}" style="color: #666;">2025-08-10</small>
        </div>
        <div th:if="${#lists.isEmpty(messages)}" style="text-align: center; color: #888;">
          まだメッセージがありません
        </div>
      </div>

      <!-- メッセージ投稿フォーム -->
      <form th:action="@{'/teams/' + ${team.id} + '/messages'}" method="post" style="margin-top: 20px;">
        <div>
          <textarea name="content" placeholder="メッセージを入力..." required 
                    style="width: 100%; height: 80px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
        </div>
        <button type="submit" style="margin-top: 8px; padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">送信</button>
      </form>
      
      <!-- ホームに戻るリンク -->
      <div style="margin-top: 20px;">
        <a th:href="@{/home}" style="color: #007bff; text-decoration: none;">← ホームに戻る</a>
      </div>
    </div>
  </div>

</body>
</html>
